# Changelog

All notable changes to Character Markdown will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Planned
- Export templates (user-defined markdown templates)
- Build comparison (compare two characters side-by-side)
- Historical tracking (save build snapshots)
- Guild integration (share builds to guild roster)
- Build import (parse markdown back to settings)

---

## [2.2.1] - 2025-11-16

### Fixed
- **Test Validation**: Improved test validation clarity and accuracy
  - Fixed confusing test summary message ("validation passed" now just "passed")
  - Fixed Backpack inventory pattern to handle both bold and non-bold formatting
  - Fixed Companion section detection to match both singular and plural forms ("Companion" and "Companions")
  - Test results now clearly indicate pass/fail status without ambiguity

---

## [2.2.0] - 2025-11-15

### Added
- **Documentation System**: Comprehensive documentation organization and tooling
  - Added `docs/prompts/changelog_entry_prompt.md` - AI-assisted CHANGELOG generation
  - Added `docs/prompts/documentation_consolidation_prompt.md` - Documentation cleanup automation
  - Added `docs/DOCUMENTATION_AUDIT_GUIDE.md` - Documentation health check guide
  - Added `docs/RELEASE_TASKS_REFERENCE.md` - Complete task command reference
  - Added `docs/TASKFILE_ENHANCEMENTS.md` - Taskfile improvements documentation
  - Added `docs/VERSION_PLACEHOLDER_SYSTEM.md` - Git-based versioning guide
  - Created `archive/` directory for historical implementation docs
- **Release Automation**: Enhanced release workflow and validation
  - Comprehensive pre-release validation script (`scripts/pre-release-check.sh`)
  - New task commands: `task release:check`, `task release:tag`, `task release:checklist`
  - Documentation audit tasks: `task docs:audit`, `task docs:links`
  - Example file cleanup: `task examples:trim` with dry-run support
  - Git hook installation: `task git:hooks:install` for automated validation
- **Scripts and Tools**: New utility scripts for maintenance
  - `scripts/trim-markdown.py` - Clean up markdown files (remove chunk markers, excess padding)
  - `scripts/README.md` - Documentation for all project scripts

### Changed
- **Documentation Structure**: Major reorganization for better maintainability
  - Moved 17 implementation/review docs to `archive/` directory
  - Updated all documentation with improved formatting and cross-references
  - Enhanced `RELEASE_CHECKLIST.md` with AI automation instructions
  - Improved `docs/PUBLISHING.md`, `docs/DEVELOPMENT.md`, `docs/ARCHITECTURE.md`
  - Streamlined example files in `assets/examples/` and `assets/templates/`
- **GitHub Actions**: Enhanced release workflow (`release.yaml`)
  - Better validation and error handling
  - Improved release artifact generation
- **Taskfile**: Expanded task automation (`Taskfile.yaml`)
  - New release management tasks
  - Documentation validation tasks
  - Example file cleanup tasks
  - Git operations tasks

### Fixed
- **Example Files**: Cleaned up markdown examples
  - Removed chunk markers from example files
  - Reduced excessive trailing newlines
  - Improved readability for distribution

## [2.1.11] - 2025-01-21

### Fixed
- **Critical**: Fixed guild collector crash - `Extended.lua` was missing from manifest
  - Added `src/collectors/Extended.lua` to `CharacterMarkdown.addon`
  - Fixed "Attempt to call a nil value" error when collecting guild data
- **Critical**: Fixed Lua 5.1 compatibility - removed `goto` statement
  - Replaced `goto continue` with proper `if` control flow (Lua 5.2+ feature)
  - Guild collector now works in ESO's Lua 5.1 environment
- **API Functions**: Updated titles collector to use correct ESO API functions
  - Replaced deprecated `GetPlayerTitle()` / `GetNumPlayerTitles()` / `GetPlayerTitleByIndex()`
  - Now uses `GetCurrentTitle()`, `GetTitleName()`, `GetNumTitles()`, `IsTitleKnown()`
  - Updated `Character.lua` collector to use correct title API pattern
- **Zone Completion**: Enhanced zone completion tracking with POI-based API
  - Added three-tier fallback: `GetZoneCompletionStatus()` → POI tracking → manual calculation
  - More accurate zone completion percentages using Points of Interest (POI) system
  - Better handling of zones with partial completion data

### Changed
- **Error Handling**: Enhanced `SafeCollect()` to handle nil function references gracefully
  - Prevents crashes when collectors fail to load
  - Better error messages for debugging
- **Footer**: Updated footer to show format instead of version
  - Changed from `**Generated by Character Markdown v2.1.7**`
  - Now shows: `**Generated by Character Markdown (GITHUB)**` (format-based)
  - Removed version number from footer output

### Added
- **Guild Data**: Full guild membership information collection
  - Guild names, member counts, player rank, alliance
  - Uses correct API: `GetGuildMemberInfo()` and `GetFinalGuildRankName()`

---

## [2.1.10] - 2025-01-21

### Planned
- Export templates (user-defined markdown templates)
- Build comparison (compare two characters side-by-side)
- Historical tracking (save build snapshots)
- Guild integration (share builds to guild roster)
- Build import (parse markdown back to settings)
- Debug mode toggle in settings UI

---

## [2.1.10] - 2025-01-21

### Added
- **Release Automation**: Enhanced GitHub Actions workflow for automated releases
  - Automatic version updates in README_ESOUI.txt during release process
  - Improved release artifact generation and validation
  - Streamlined ESOUI upload process

### Changed
- **Release Process**: Optimized workflow for better reliability
  - Better error handling in release automation
  - Enhanced ZIP package validation
  - Improved changelog extraction and formatting

---

## [2.1.8] - 2025-01-21

### Added
- **ESOUI Description**: Enhanced README_ESOUI.txt with comprehensive user guide
  - Complete feature overview and installation instructions
  - Detailed command reference and format explanations
  - Professional formatting optimized for ESOUI.com display
  - AI integration use cases and troubleshooting guide

### Changed
- **Documentation**: Updated ESOUI description file for better user experience
  - Streamlined quick start guide for new users
  - Enhanced feature descriptions with clear use cases
  - Professional presentation ready for ESOUI publication

---

## [2.1.7] - 2025-01-21

### Added
- **Documentation Overhaul**: Complete rewrite of README.md for better user experience
  - Concise, professional format with clear quick start guide
  - Comprehensive feature overview and format explanations
  - Better organization with badges and structured sections
- **Enhanced User Guide**: Streamlined docs/README.md with detailed instructions
  - Complete troubleshooting section with common issues
  - Best practices for different use cases (Discord, GitHub, etc.)
  - Advanced features documentation (custom notes, profiles, import/export)
- **Project Cleanup**: Added .gitignore to prevent build artifacts from being committed

### Removed
- **Unnecessary Files**: Cleaned up development artifacts
  - Removed debug scripts (debug_version.sh, test_sed.sh)
  - Deleted example output files in wrong locations
  - Cleaned up empty directories and temporary files
- **Redundant Documentation**: Consolidated documentation structure
  - Removed outdated champion point diagrams
  - Deleted redundant example files
  - Streamlined docs directory structure

### Changed
- **Documentation Structure**: Reorganized for better maintainability
  - Main README.md now focuses on quick start and overview
  - Detailed user guide moved to docs/README.md
  - Cleaner separation between user and developer documentation
- **Project Organization**: Improved file structure and cleanliness
  - Removed build artifacts and temporary files
  - Better organization of documentation files
  - Professional project appearance ready for release

---

## [2.1.6] - 2025-01-21

### Removed
- **Documentation Cleanup**: Removed outdated phase completion files
  - Deleted PHASE1_COMPLETE.md through PHASE8_COMPLETE.md
  - Removed PHASE*_QUICKREF.md files
  - Cleaned up temporary implementation notes and session summaries
- **Temporary Files**: Removed development artifacts
  - Deleted SKILL_MORPHS_GENERATOR_CODE.lua (code already integrated)
  - Removed validate_phase1.sh (phase validation complete)
  - Cleaned up IMPLEMENTATION_NOTES.md and SESSION_SUMMARY.md
- **Redundant Documentation**: Consolidated documentation
  - Removed MISSING_SECTIONS_IMPLEMENTED.md
  - Deleted CRAFTING_FIX.md and FORMAT_IMPROVEMENTS.md
  - Removed SECTIONS_ANALYSIS.md and VISUAL_COMPARISON.md
  - Cleaned up CHANGELOG_build_notes_toggle.md

### Changed
- **Debug Output**: Streamlined initialization logging
  - Reduced verbose debug output during addon startup
  - Removed debug helper functions no longer needed
  - Cleaner console output for better user experience

---

## [2.1.5] - 2025-01-21

### Fixed
- **Build System**: Fixed `.build-ignore` to properly exclude development files
  - Corrected pattern to exclude `README.md` but include `README_ESOUI.txt`
  - Ensures ESOUI description file is included in release packages

### Added
- **Documentation**: Enhanced ESOUI description file (`README_ESOUI.txt`)
  - Added AI assistant use case (ChatGPT, Claude integration)
  - Included GitHub repository link in header
  - Added `/cmdsettings` command documentation
  - Converted to plain ASCII for proper rendering on ESOUI.com
  - Comprehensive feature documentation and troubleshooting guide

### Changed
- **Publishing**: Improved GitHub Actions release workflow
  - Better ZIP structure validation
  - Enhanced changelog extraction
  - Cleaner release artifact naming

---

## [2.1.1] - 2025-01-20

### Fixed
- **Critical**: Fixed settings persistence across game sessions
  - Removed manual `GetWorldName()` nesting that conflicted with ESO's built-in system
  - Settings now persist correctly after `/reloadui` and game restarts

### Added
- **Debug System**: LibDebugLogger integration for professional debug output
  - No chat clutter - debug messages only in LibDebugLogger viewer
  - Multiple log levels with category-based filtering
- **Performance Optimizations**: Cached global function lookups (~10-15% improvement)
- **Error Aggregation**: Better error reporting with consolidated summaries
- **ZIP Validation**: Automated package validation script

### Changed
- **Event System**: Simplified addon load sequence (removed complex retry logic)
- **Manifest**: Updated to v2.1.1 with proper `.addon` extension
- **Code Quality**: All core modules now follow ESO guidelines
  - Namespace protection (zero global pollution)
  - Defensive programming with pcall wrapping
  - Consistent error handling

### Removed
- **Global Function Pollution**: Cleaned up `_G` namespace
- **Duplicate Manifest**: Using only `CharacterMarkdown.addon` format

---

## [2.1.0] - 2025-01-18

### Added
- **Champion Points Display**: Complete CP allocation across all three disciplines
- **UESP Wiki Links**: Automatic hyperlinks for abilities, equipment, races, etc.
- **Multiple Export Formats**: GitHub, Discord, VS Code, and Quick formats
- **DLC/Chapter Tracking**: Display ESO Plus status and owned content
- **Mundus Stone Detection**: Automatically detects active mundus buff
- **Active Buffs Display**: Shows food, potions, and other active effects
- **Companion Information**: Active companion name and stats
- **Currency Tracking**: Gold, AP, Tel Var, Transmutes, Writ Vouchers, and more
- **Riding Skills**: Mount training progress
- **Inventory Capacity**: Backpack and bank usage statistics
- **PvP Data**: Alliance War rank and active campaign

### Changed
- **UI Improvements**: Better window management and user experience
- **Performance**: Optimized data collection and markdown generation
- **Code Structure**: Modular design with separate collectors and generators

---

## [2.0.0] - 2025-01-15

### Added
- **Complete Rewrite**: Modern, modular architecture
- **Character Data Collection**: Comprehensive character information gathering
- **Markdown Generation**: Clean, formatted output for sharing builds
- **Settings System**: User-configurable options for data collection
- **Command Interface**: In-game commands for easy access

### Changed
- **Architecture**: From monolithic to modular design
- **Performance**: Significant improvements in data collection speed
- **Maintainability**: Cleaner, more organized codebase

---

## [1.0.0] - 2025-01-10

### Added
- Initial release
- Basic character data collection
- Simple markdown output
- Core functionality for ESO character builds