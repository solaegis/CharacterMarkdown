# CharacterMarkdown v2.1.0 - Extended Information Edition

## Summary of Changes

This update adds comprehensive character information tracking across 9 new categories, all with individual toggle controls in the settings panel.

## New Features

### 1. Currency & Resources (`includeCurrency`)
**Tracks:**
- Gold
- Alliance Points (AP)
- Tel Var Stones
- Transmute Crystals
- Writ Vouchers
- Event Tickets
- Undaunted Keys
- Crowns (when present)
- Crown Gems (when present)
- Seals of Endeavor (when present)

**Display:** Formatted table in GitHub/VS Code, bullet list in Discord

### 2. Character Progression (`includeProgression`)
**Tracks:**
- Unspent Skill Points (alerts when > 0)
- Unspent Attribute Points (alerts when > 0)
- Achievement Score (earned/total with percentage)
- Vampire status with stage level (1-4)
- Werewolf status
- CP Enlightenment pool (current/max with percentage)

**UESP Links:** Vampire and Werewolf pages (when active)

### 3. Riding Skills (`includeRidingSkills`)
**Tracks:**
- Speed (0-60)
- Stamina (0-60)
- Carrying Capacity (0-60)
- Training availability indicator
- "All maxed" notification

**Display:** Progress table with status indicators

### 4. Inventory Management (`includeInventory`)
**Tracks:**
- Backpack: used/max slots with percentage
- Bank: used/max slots with percentage
- Crafting Bag status (ESO Plus indicator)

**Display:** Table format with capacity percentages

### 5. PvP Information (`includePvP`)
**Tracks:**
- Alliance War Rank with proper rank name
- Current Campaign assignment

**UESP Links:** Campaign names link to Campaigns page

### 6. Role & Location (`includeRole`, `includeLocation`)
**Tracks:**
- Selected role (Tank üõ°Ô∏è / Healer üíö / DPS ‚öîÔ∏è)
- Current zone/location
- Subzone information

**UESP Links:** Zone names link to zone pages
**Display:** Shown in Character Overview table

### 7. Collectibles (`includeCollectibles`)
**Tracks:**
- Mount count üê¥
- Pet count üêæ
- Costume count üëó
- House count üè†

**Display:** Table format with counts

### 8. Crafting Knowledge (`includeCrafting`)
**Tracks:**
- Known motifs (basic racial motifs, percentage)
- Active research slots count

**Display:** Table format with progress indicators

### 9. UESP Link Expansion
**New Links:**
- Zones/Locations (e.g., "Deshaan" ‚Üí UESP:Online:Deshaan)
- PvP Campaigns (e.g., "Ravenwatch" ‚Üí UESP:Online:Campaigns#Ravenwatch)

All links respect the "Enable UESP Links" toggle in settings.

## Settings Panel Changes

### New Section: "Extended Character Information"
Organized all new features under a dedicated section with individual toggles:
- Include Currency & Resources
- Include Progression Info
- Include Riding Skills
- Include Inventory Space
- Include PvP Information
- Include Role
- Include Current Location
- Include Collectibles
- Include Crafting Knowledge

### Updated Section: "Core Content Sections"
Renamed from "Content Sections" for better organization.

### All New Options
- Default to **enabled** (true)
- Can be individually toggled on/off
- Saved in CharacterMarkdownSettings

### Updated UESP Links Tooltip
Now mentions:
- Abilities, Armor sets
- Race, Class, Alliance
- Mundus stones, Champion Point skills
- **NEW:** Zones/Locations, PvP Campaigns, Companions

## Technical Implementation

### New Data Collection Functions (9)
1. `CollectCurrencyData()` - All currencies and resources
2. `CollectProgressionData()` - Skill/attribute points, achievements, vampire/werewolf, enlightenment
3. `CollectRidingSkillsData()` - Mount training progress
4. `CollectInventoryData()` - Bag space tracking
5. `CollectPvPData()` - Alliance War rank and campaign
6. `CollectRoleData()` - Selected group role
7. `CollectLocationData()` - Current zone/subzone
8. `CollectCollectiblesData()` - Mount/pet/costume/house counts
9. `CollectCraftingKnowledgeData()` - Motif and research tracking

### New UESP URL Generators (2)
1. `GenerateZoneURL()` / `CreateZoneLink()` - For locations
2. `GenerateCampaignURL()` / `CreateCampaignLink()` - For PvP campaigns

### Markdown Generation
All new sections support all 4 output formats:
- **GitHub:** Full tables with icons, HTML styling
- **VS Code:** Clean tables with emoji indicators
- **Discord:** Compact bullet lists with inline stats
- **Quick:** Unchanged (ultra-compact one-line summary)

## API Functions Used

### Currency
- `GetCurrentMoney()` - Gold
- `GetCurrencyAmount(CURT_*, CURRENCY_LOCATION_*)` - All other currencies

### Progression
- `GetAvailableSkillPoints()` - Unspent skill points
- `GetAttributeUnspentPoints()` - Unspent attribute points
- `GetEarnedAchievementPoints()` / `GetTotalAchievementPoints()` - Achievements
- `IsUnitVampire("player")` / `GetVampireStage()` - Vampire status
- `IsUnitWerewolf("player")` - Werewolf status
- `GetEnlightenedPool()` / `GetEnlightenedLevelSize()` - CP enlightenment

### Riding
- `GetRidingStats()` - Speed, stamina, capacity
- `GetTimeUntilCanBeTrained(RIDING_TRAIN_*)` - Training availability

### Inventory
- `GetNumBagUsedSlots(BAG_*)` / `GetBagSize(BAG_*)` - Bag space
- `HasCraftBagAccess()` - Crafting bag availability

### PvP
- `GetUnitAvARank("player")` - Alliance War rank number
- `GetAvARankName(gender, rank)` - Rank name (e.g., "Grand Overlord")
- `GetAssignedCampaignId()` / `GetCampaignName(id)` - Campaign info

### Role & Location
- `GetGroupMemberSelectedRole("player")` - Tank/Healer/DPS
- `GetUnitZone("player")` - Current zone
- `GetPlayerActiveSubzoneName()` - Subzone

### Collectibles
- `GetTotalCollectiblesByCategoryType(COLLECTIBLE_CATEGORY_TYPE_*)` - Counts

### Crafting
- `IsPlayerChapterUnlocked(motifId)` - Motif knowledge
- `GetSmithingResearchLineInfo()` / `GetSmithingResearchLineTraitTimes()` - Research

## Version Updates

### Files Modified
1. `CharacterMarkdown.lua` - Main addon file (v2.1.0)
2. `CharacterMarkdown_Settings.lua` - Settings panel (v2.1.0)
3. `CharacterMarkdown.txt` - Manifest (v2.1.0)
4. `CHANGELOG.md` - Version history (added v2.1.0 entry)

### Initialization Message
Updated to show:
```
[CharacterMarkdown] ‚ö° Loaded v2.1.0
[CharacterMarkdown] üìã Use /markdown to generate your character profile
[CharacterMarkdown] üìö Current format: GITHUB
[CharacterMarkdown] üîó UESP links enabled for: abilities, skill lines, sets, races, classes, zones, campaigns, companions, mundus stones, CP skills
[CharacterMarkdown] üí∞ NEW: Currency, progression, riding skills, inventory, PvP, collectibles, crafting info
[CharacterMarkdown] üí° Type /markdown help for usage info
```

## Backward Compatibility

- ‚úÖ Safe to upgrade from v2.0.x
- ‚úÖ Existing settings preserved
- ‚úÖ New settings initialize to `true` (enabled)
- ‚úÖ No breaking changes to existing functionality
- ‚úÖ All existing formats still work (GitHub, VS Code, Discord, Quick)

## Testing Checklist

### Data Collection
- [ ] Currency values display correctly
- [ ] Progression data shows skill/attribute points
- [ ] Vampire/Werewolf status appears when active
- [ ] Riding skills show correct progress
- [ ] Inventory percentages calculate correctly
- [ ] PvP rank displays with proper name
- [ ] Role and location show in overview
- [ ] Collectibles count matches game UI
- [ ] Crafting research count is accurate

### UESP Links
- [ ] Zone links work (e.g., Deshaan)
- [ ] Campaign links work (e.g., Ravenwatch)
- [ ] Links respect the enable/disable toggle
- [ ] Links work in GitHub and Discord formats
- [ ] Links don't appear in VS Code format

### Settings Panel
- [ ] All new toggles appear in settings
- [ ] Toggles can be enabled/disabled
- [ ] Changes save and persist across sessions
- [ ] Reset button includes all new settings
- [ ] Settings panel loads without errors

### Output Formats
- [ ] GitHub format: tables display correctly
- [ ] VS Code format: clean markdown
- [ ] Discord format: compact bullet lists
- [ ] Quick format: unchanged (one-line)
- [ ] All emojis display correctly

## Future Enhancement Ideas

1. **Daily/Weekly Progress Tracking**
   - Random dungeon completion
   - Pledges completed
   - Trial/Arena clears

2. **Guild Information**
   - Guild memberships (up to 5)
   - Guild ranks
   - Guild trader status

3. **Quest Progress**
   - Main quest completion
   - Zone quest progress
   - Notable quest lines

4. **More Detailed Crafting**
   - Full motif list by category
   - Recipe counts by type
   - Trait research completion percentage

5. **Social Features**
   - Friends list count
   - Ignored list count
   - Recent group members

## Notes for Users

### To Enable/Disable Features
1. Press ESC ‚Üí Settings ‚Üí Addons ‚Üí CharacterMarkdown
2. Scroll to "Extended Character Information"
3. Toggle individual features on/off
4. Generate new profile with `/markdown`

### Default Behavior
All new features are **enabled by default**. If you want a more compact profile, disable features you don't need.

### UESP Links
All new UESP links (zones, campaigns) respect the main "Enable UESP Links" toggle. If you disable links, none will appear (including existing ability/set links).

### Performance
All new data collection uses safe API calls with error handling. No performance impact expected.

---

**Version:** 2.1.0  
**Release Date:** October 16, 2025  
**Author:** solaegis

